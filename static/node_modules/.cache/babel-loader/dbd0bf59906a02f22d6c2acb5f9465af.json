{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lricc\\\\go\\\\src\\\\tagmaster\\\\static\\\\src\\\\components\\\\LoggedIn.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\n\nconst LoggedIn = () => {\n  const [products, setProducts] = useState([]);\n  const [voted, setVoted] = useState({\n    \"world-of-authcraft\": \"\",\n    \"ocean-explorer\": \"\",\n    \"dinosaur-park\": \"\",\n    \"cars-vr\": \"\",\n    \"robin-hood\": \"\",\n    \"real-world-vr\": \"\"\n  });\n  const {\n    getTokenSilently,\n    loading,\n    user,\n    logout,\n    isAuthenticated\n  } = useAuth0();\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        const token = await getTokenSilently(); // Send a GET request to the server and add the signed in user's\n        // access token in the Authorization header\n\n        const response = await fetch(\"http://localhost:8080/products\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const responseData = await response.json();\n        setProducts(responseData);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    getProducts();\n  }, []);\n\n  const vote = async (slug, type, index) => {\n    try {\n      const token = await getTokenSilently(); // Send a POST request to the Go server for the selected product\n      // with the vote type\n\n      const response = await fetch(`http://localhost:8080/products/${slug}/feedback`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          vote: type\n        })\n      }); // Since this is just for demonstration and we're not actually\n      // persisting this data, we'll just set the product vote status here\n      // if the product exists\n\n      if (response.ok) {\n        setVoted({ ...voted,\n          [slug]: [type]\n        });\n      } else console.log(response.status);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  if (loading || !user) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jumbotron text-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, isAuthenticated && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn btn-primary float-right\",\n    onClick: () => logout(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Log out\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, \"We R VR\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Hi, \", user.name, \"! Below you'll find the latest games that need feedback. Please provide honest feedback so developers can make the best games.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, products.map(function (product, index) {\n    const prodSlug = product.Slug;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-4\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }, product.Name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, product.Description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => vote(product.Slug, \"Upvoted\", index),\n      className: \"btn btn-default float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FiThumbsUp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"small\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, voted[prodSlug]), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => vote(product.Slug, \"Downvoted\", index),\n      className: \"btn btn-default float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FiThumbsDown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 23\n      }\n    })))));\n  }))));\n};\n\nexport default LoggedIn;","map":{"version":3,"sources":["C:/Users/lricc/go/src/tagmaster/static/src/components/LoggedIn.js"],"names":["React","useState","useEffect","useAuth0","FiThumbsUp","FiThumbsDown","LoggedIn","products","setProducts","voted","setVoted","getTokenSilently","loading","user","logout","isAuthenticated","getProducts","token","response","fetch","headers","Authorization","responseData","json","error","console","vote","slug","type","index","method","body","JSON","stringify","ok","log","status","name","map","product","prodSlug","Slug","Name","Description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth0 } from \"../react-auth0-spa\";\r\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\r\n\r\nconst LoggedIn = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [voted, setVoted] = useState({\r\n    \"world-of-authcraft\": \"\",\r\n    \"ocean-explorer\": \"\",\r\n    \"dinosaur-park\": \"\",\r\n    \"cars-vr\": \"\",\r\n    \"robin-hood\": \"\",\r\n    \"real-world-vr\": \"\",\r\n  });\r\n\r\n  const {\r\n    getTokenSilently,\r\n    loading,\r\n    user,\r\n    logout,\r\n    isAuthenticated,\r\n  } = useAuth0();\r\n\r\n  useEffect(() => {\r\n    const getProducts = async () => {\r\n      try {\r\n        const token = await getTokenSilently();\r\n        // Send a GET request to the server and add the signed in user's\r\n        // access token in the Authorization header\r\n        const response = await fetch(\"http://localhost:8080/products\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        setProducts(responseData);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    getProducts();\r\n  }, []);\r\n\r\n  const vote = async (slug, type, index) => {\r\n    try {\r\n      const token = await getTokenSilently();\r\n      // Send a POST request to the Go server for the selected product\r\n      // with the vote type\r\n      const response = await fetch(\r\n        `http://localhost:8080/products/${slug}/feedback`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({ vote: type }),\r\n        }\r\n      );\r\n      // Since this is just for demonstration and we're not actually\r\n      // persisting this data, we'll just set the product vote status here\r\n      // if the product exists\r\n      if (response.ok) {\r\n        setVoted({\r\n          ...voted,\r\n          [slug]: [type],\r\n        });\r\n      } else console.log(response.status);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  if (loading || !user) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"jumbotron text-center mt-5\">\r\n        {isAuthenticated && (\r\n          <span\r\n            className=\"btn btn-primary float-right\"\r\n            onClick={() => logout()}\r\n          >\r\n            Log out\r\n          </span>\r\n        )}\r\n        <h1>We R VR</h1>\r\n        <p>\r\n          Hi, {user.name}! Below you'll find the latest games that need\r\n          feedback. Please provide honest feedback so developers can make the\r\n          best games.\r\n        </p>\r\n        <div className=\"row\">\r\n          {products.map(function (product, index) {\r\n            const prodSlug = product.Slug;\r\n            return (\r\n              <div className=\"col-sm-4\" key={index}>\r\n                <div className=\"card mb-4\">\r\n                  <div className=\"card-header\">{product.Name}</div>\r\n                  <div className=\"card-body\">{product.Description}</div>\r\n                  <div className=\"card-footer\">\r\n                    <a onClick={() => vote(product.Slug, \"Upvoted\", index)}\r\n                      className=\"btn btn-default float-left\">\r\n                      <FiThumbsUp />\r\n                    </a>\r\n                    <small className=\"text-muted\">{voted[prodSlug]}</small>\r\n                    <a onClick={() => vote(product.Slug, \"Downvoted\", index)}\r\n                      className=\"btn btn-default float-right\">\r\n                      <FiThumbsDown />\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedIn;"]},"metadata":{},"sourceType":"module"}